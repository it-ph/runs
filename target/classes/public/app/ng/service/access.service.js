angular.module("run_proud").factory("Access",["$http",function(a){return{getClaims:function(){return a({method:"POST",dataType:"json",url:"/user-claims",headers:{"Content-Type":"application/json; charset=UTF-8"}})},getClaimsFromToken:function(t,n,r){a({method:"POST",url:"/user-claims",headers:{Authorization:"Bearer "+t}}).then(function(e){a.defaults.headers.common.Authorization="Bearer "+t,this.user=e.data.principal.user,n(e)}).catch(function(e){a.defaults.headers.common.Authorization=null,r(e)})},clearData:function(){this.user=null,a.defaults.headers.common.Authorization=null},logout:function(){this.user=null,a.defaults.headers.common.Authorization=null},changePassword:function(e){return a({method:"POST",data:e,dataType:"json",url:"/users/changePassword",headers:{"Content-Type":"application/json; charset=UTF-8"}})},getUser:function(){return this.user},setUser:function(e){this.user=e}}}]);